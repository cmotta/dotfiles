#!/bin/sh
#
# Find and replace by a given list of files.
#
# replace foo bar **/*.rb

find_this=$1
shift
replace_with=$1
shift

# Detect GNU vs BSD sed for in-place editing
if sed --version >/dev/null 2>&1; then
  sed_inplace="sed -i"
else
  sed_inplace="sed -i ''"
fi

ag -l --nocolor "$find_this" "$@" | xargs $sed_inplace "s/$find_this/$replace_with/g"
